:: make library which will use a "load on demand" approach regarding "replay" data
:: **** use the "-s WASM" switch to compile WebAssembly output. warning: the SINGLE_FILE approach does NOT currently work in Chrome 63.. ****

emcc.bat -s WASM=0 -s VERBOSE=0 -s ASSERTIONS=0 -s FORCE_FILESYSTEM=1  --js-library callback.js -DONDEMAND -Wno-pointer-sign -I ../ -Os -O3 --memory-init-file 0 --closure 1 --llvm-lto 1  ../api68/api68.c ../api68/conf68.c ../api68/mixer68.c ../emu68/cc68.c ../emu68/emu68.c ../emu68/error68.c ../emu68/getea68.c ../emu68/inst68.c  ../emu68/ioplug68.c ../emu68/mem68.c ../emu68/line0_68.c ../emu68/line1_68.c ../emu68/line2_68.c ../emu68/line3_68.c ../emu68/line4_68.c ../emu68/line5_68.c ../emu68/line6_68.c ../emu68/line7_68.c ../emu68/line8_68.c ../emu68/line9_68.c ../emu68/lineA_68.c ../emu68/lineB_68.c ../emu68/lineC_68.c ../emu68/lineD_68.c ../emu68/lineE_68.c ../emu68/lineF_68.c ../emu68/table68.c ../file68/alloc68.c ../file68/debugmsg68.c  ../file68/endian68.c  ../file68/error68.c ../file68/file68.c ../file68/gzip68.c ../file68/ice68.c ../file68/istream68.c ../file68/istream68_fd.c ../file68/istream68_file.c  ../file68/istream68_mem.c ../file68/string68.c ../io68/mfp_io.c ../io68/mfpemul.c ../io68/mw_io.c ../io68/mwemul.c ../io68/paula_io.c ../io68/paulaemul.c ../io68/shifter_io.c ../io68/ym_io.c ../io68/ymemul.c ../unice68/unice68_native.c ../sc68/sc68.c adapter.c  -s EXPORTED_FUNCTIONS="['_alloc','_emu_init', '_emu_getVolVoice1', '_emu_getVolVoice2', '_emu_getVolVoice3', '_emu_get_current_position', '_emu_seek_position', '_emu_get_max_position', '_emu_set_binary_data', '_emu_change_subsong', '_emu_get_audio_buffer_length', '_emu_get_audio_buffer', '_emu_compute_audio_samples', '_emu_is_error', '_emu_is_waiting', '_emu_is_track_change', '_emu_is_end', '_emu_is_loop', '_emu_get_track_info', '_emu_get_sample_rate', '_malloc', '_free']"  -o htdocs/sc68-web2.js -s SINGLE_FILE=0 -s EXTRA_EXPORTED_RUNTIME_METHODS="['ccall', 'Pointer_stringify']"  -s BINARYEN_ASYNC_COMPILATION=1 -s BINARYEN_TRAP_MODE='clamp' && copy /b shell-pre.js + htdocs\sc68-web2.js + shell-post.js htdocs\sc68-web.js && del htdocs\sc68-web2.js  && copy /b htdocs\sc68-web.js + sc68_adapter.js htdocs\backend_sc68.js && del htdocs\sc68-web.js